# Example configuration demonstrating Parquet capture format
#
# This config shows how to use the Parquet columnar format for capturing
# lading's internal metrics. Parquet provides better compression and query
# performance compared to JSONL format.

telemetry:
  log:
    path: "/tmp/lading-metrics.parquet"
    global_labels:
      environment: "production"
      test_id: "http-load-test"
    expiration: "1h"
    format:
      parquet:
        # Write buffered metrics every 60 seconds as a Parquet row group
        flush_seconds: 60
        # Zstd compression level (1-22, default: 3)
        # - Level 1-3: Fast compression, good for high-throughput scenarios
        # - Level 4-9: Balanced compression and speed
        # - Level 10-22: Maximum compression, slower writes
        compression_level: 3

generator:
  - id: "http_load_generator"
    http:
      seed: [2, 3, 5, 7, 11, 13, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127, 131, 137]
      target_uri: "http://localhost:8080/"
      bytes_per_second: "100 MiB"
      parallel_connections: 10
      method:
        post:
          maximum_prebuild_cache_size_bytes: "256 MiB"
          variant: "ascii"

blackhole:
  - http:
      binding_addr: "0.0.0.0:9090"
